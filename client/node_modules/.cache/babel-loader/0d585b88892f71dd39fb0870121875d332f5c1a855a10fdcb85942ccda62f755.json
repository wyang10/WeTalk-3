{"ast":null,"code":"import _regeneratorRuntime from\"/Users/weihongyang/Desktop/WeTalk/version4/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/weihongyang/Desktop/WeTalk/version4/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/weihongyang/Desktop/WeTalk/version4/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"../css/RegisterPage.css\";import{baseurl,setLoginUser}from\"../config\";import{useEffect,useState}from\"react\";import{post}from\"../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function RegisterPage(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),confirm=_useState6[0],setConfirm=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),nickname=_useState8[0],setNickname=_useState8[1];useEffect(function(){setLoginUser(\"\");},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Register\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Username: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Nickname: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nickname,onChange:function onChange(e){return setNickname(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Password: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Confirm: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:confirm,onChange:function onChange(e){return setConfirm(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-ok\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var r;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(password.length>0)){_context.next=11;break;}if(!(confirm==password)){_context.next=8;break;}_context.next=4;return post(\"\".concat(baseurl,\"/register\"),{username:username,password:password,nickname:nickname});case 4:r=_context.sent;if(r.success){setLoginUser(username);window.location='/';}else{alert(r.error);window.location='/register';}_context.next=9;break;case 8:alert(\"Password and confirm should be the same\");case 9:_context.next=12;break;case 11:alert(\"Password should not be empty\");case 12:case\"end\":return _context.stop();}}},_callee);})),children:\"OK\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-cancel\",onClick:function onClick(){window.location=\"/\";},children:\"Cancel\"})]})]});}","map":{"version":3,"names":["baseurl","setLoginUser","useEffect","useState","post","RegisterPage","props","username","setUsername","password","setPassword","confirm","setConfirm","nickname","setNickname","e","target","value","length","r","success","window","location","alert","error"],"sources":["/Users/weihongyang/Desktop/WeTalk/version4/client/src/pages/RegisterPage.js"],"sourcesContent":["import \"../css/RegisterPage.css\"\r\nimport {baseurl, setLoginUser} from \"../config\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {post} from \"../utils\";\r\n\r\nexport function RegisterPage(props) {\r\n\r\n  let [username, setUsername] = useState(\"\")\r\n  let [password, setPassword] = useState(\"\")\r\n  let [confirm, setConfirm] = useState(\"\")\r\n  let [nickname, setNickname] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    setLoginUser(\"\");\r\n  }, [])\r\n\r\n  return (<div>\r\n      <div>\r\n        <h2>Register</h2>\r\n      </div>\r\n\r\n      <div className={\"field\"}>\r\n        <span>Username: </span>\r\n        <input type={\"text\"} value={username} onChange={e => setUsername(e.target.value)}/>\r\n      </div>\r\n      <div className={\"field\"}>\r\n        <span>Nickname: </span>\r\n        <input type={\"text\"} value={nickname} onChange={e => setNickname(e.target.value)}/>\r\n      </div>\r\n      <div className={\"field\"}>\r\n        <span>Password: </span>\r\n        <input type={\"password\"} value={password} onChange={e => setPassword(e.target.value)}/>\r\n      </div>\r\n      <div className={\"field\"}>\r\n        <span>Confirm: </span>\r\n        <input type={\"password\"} value={confirm} onChange={e => setConfirm(e.target.value)}/>\r\n      </div>\r\n      <div>\r\n        <button className={\"btn-ok\"} onClick={async () => {\r\n          if (password.length > 0) {\r\n            if (confirm == password) {\r\n              let r = await post(`${baseurl}/register`, {username, password, nickname})\r\n              if (r.success) {\r\n                setLoginUser(username)\r\n                window.location = '/'\r\n              } else {\r\n                alert(r.error)\r\n                window.location = '/register'\r\n              }\r\n            } else {\r\n              alert(\"Password and confirm should be the same\")\r\n            }\r\n          } else {\r\n            alert(\"Password should not be empty\")\r\n          }\r\n        }}>OK\r\n        </button>\r\n        <button className={\"btn-cancel\"} onClick={() => {\r\n          window.location = \"/\"\r\n        }}>Cancel\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nRegisterPage.propTypes = {};\r\n"],"mappings":"gZAAA,MAAO,yBAAyB,CAChC,OAAQA,OAAO,CAAEC,YAAY,KAAO,WAAW,CAC/C,OAAQC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CACzC,OAAQC,IAAI,KAAO,UAAU,CAAC,wFAE9B,MAAO,SAASC,aAAY,CAACC,KAAK,CAAE,CAElC,cAA8BH,QAAQ,CAAC,EAAE,CAAC,wCAArCI,QAAQ,eAAEC,WAAW,eAC1B,eAA8BL,QAAQ,CAAC,EAAE,CAAC,yCAArCM,QAAQ,eAAEC,WAAW,eAC1B,eAA4BP,QAAQ,CAAC,EAAE,CAAC,yCAAnCQ,OAAO,eAAEC,UAAU,eACxB,eAA8BT,QAAQ,CAAC,EAAE,CAAC,yCAArCU,QAAQ,eAAEC,WAAW,eAE1BZ,SAAS,CAAC,UAAM,CACdD,YAAY,CAAC,EAAE,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,mBAAQ,oCACJ,kCACE,gCAAiB,EACb,cAEN,aAAK,SAAS,CAAE,OAAQ,wBACtB,oCAAuB,cACvB,cAAO,IAAI,CAAE,MAAO,CAAC,KAAK,CAAEM,QAAS,CAAC,QAAQ,CAAE,kBAAAQ,CAAC,QAAIP,YAAW,CAACO,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,EAAE,GAC/E,cACN,aAAK,SAAS,CAAE,OAAQ,wBACtB,oCAAuB,cACvB,cAAO,IAAI,CAAE,MAAO,CAAC,KAAK,CAAEJ,QAAS,CAAC,QAAQ,CAAE,kBAAAE,CAAC,QAAID,YAAW,CAACC,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,EAAE,GAC/E,cACN,aAAK,SAAS,CAAE,OAAQ,wBACtB,oCAAuB,cACvB,cAAO,IAAI,CAAE,UAAW,CAAC,KAAK,CAAER,QAAS,CAAC,QAAQ,CAAE,kBAAAM,CAAC,QAAIL,YAAW,CAACK,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,EAAE,GACnF,cACN,aAAK,SAAS,CAAE,OAAQ,wBACtB,mCAAsB,cACtB,cAAO,IAAI,CAAE,UAAW,CAAC,KAAK,CAAEN,OAAQ,CAAC,QAAQ,CAAE,kBAAAI,CAAC,QAAIH,WAAU,CAACG,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,EAAE,GACjF,cACN,oCACE,eAAQ,SAAS,CAAE,QAAS,CAAC,OAAO,wEAAE,gJAChCR,QAAQ,CAACS,MAAM,CAAG,CAAC,gCACjBP,OAAO,EAAIF,QAAQ,gDACPL,KAAI,WAAIJ,OAAO,cAAa,CAACO,QAAQ,CAARA,QAAQ,CAAEE,QAAQ,CAARA,QAAQ,CAAEI,QAAQ,CAARA,QAAQ,CAAC,CAAC,QAArEM,CAAC,eACL,GAAIA,CAAC,CAACC,OAAO,CAAE,CACbnB,YAAY,CAACM,QAAQ,CAAC,CACtBc,MAAM,CAACC,QAAQ,CAAG,GAAG,CACvB,CAAC,IAAM,CACLC,KAAK,CAACJ,CAAC,CAACK,KAAK,CAAC,CACdH,MAAM,CAACC,QAAQ,CAAG,WAAW,CAC/B,CAAC,6BAEDC,KAAK,CAAC,yCAAyC,CAAC,uCAGlDA,KAAK,CAAC,8BAA8B,CAAC,wDAExC,EAAC,gBACO,cACT,eAAQ,SAAS,CAAE,YAAa,CAAC,OAAO,CAAE,kBAAM,CAC9CF,MAAM,CAACC,QAAQ,CAAG,GAAG,CACvB,CAAE,oBACO,GACL,GACF,CAGV"},"metadata":{},"sourceType":"module","externalDependencies":[]}