{"ast":null,"code":"import _regeneratorRuntime from\"D:/xingqian/htmlWorkSpace/Archive/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/xingqian/htmlWorkSpace/Archive/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/xingqian/htmlWorkSpace/Archive/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{baseurl,getLoginUser}from\"../config\";import{useEffect,useState}from\"react\";import{TwitterItem}from\"../components/TwitterItem\";import{ReplyItem}from\"../components/ReplyItem\";import{post}from\"../utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function TwitterDetailPage(props){function refresh(){post(\"\".concat(baseurl,\"/get_twitter\"),{twitter_id:id}).then(function(data){setTwitter(data);});post(\"\".concat(baseurl,\"/get_twitter_replies\"),{twitter_id:id}).then(function(data){setReplies(data);});}var queryParameters=new URLSearchParams(window.location.search);var id=queryParameters.get(\"id\");useEffect(function(){refresh();},[]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),twitter=_useState2[0],setTwitter=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),replies=_useState4[0],setReplies=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];return/*#__PURE__*/_jsxs(\"div\",{children:[twitter.map(function(x,idx){return/*#__PURE__*/_jsx(TwitterItem,{twitter_item:x},x._id);}),/*#__PURE__*/_jsxs(\"div\",{className:\"reply-box\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"twitter-area\",onChange:function onChange(e){return setContent(e.target.value);},value:content}),/*#__PURE__*/_jsx(\"button\",{className:\"twitter-postbtn\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(content.length<5)){_context.next=3;break;}alert(\"The minimum length of twitter is 5\");return _context.abrupt(\"return\");case 3:_context.next=5;return post(\"\".concat(baseurl,\"/reply_twitter\"),{username:getLoginUser(),content:content,twitter_id:id});case 5:refresh();case 6:case\"end\":return _context.stop();}}},_callee);})),children:\"Reply\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"twitter-delbtn\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return post(\"\".concat(baseurl,\"/del_twitter\"),{twitter_id:id});case 2:window.location='/home';case 3:case\"end\":return _context2.stop();}}},_callee2);})),children:\"Delete this twitter\"}),/*#__PURE__*/_jsx(\"div\",{style:{height:\"20px\"}}),replies.map(function(x,i){return/*#__PURE__*/_jsx(ReplyItem,{reply_item:x},i);})]});}","map":{"version":3,"names":["baseurl","getLoginUser","useEffect","useState","TwitterItem","ReplyItem","post","TwitterDetailPage","props","refresh","twitter_id","id","then","data","setTwitter","setReplies","queryParameters","URLSearchParams","window","location","search","get","twitter","replies","content","setContent","map","x","idx","_id","e","target","value","length","alert","username","height","i"],"sources":["D:/xingqian/htmlWorkSpace/Archive/client/src/pages/TwitterDetailPage.js"],"sourcesContent":["import {baseurl, getLoginUser} from \"../config\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {TwitterItem} from \"../components/TwitterItem\";\r\nimport {ReplyItem} from \"../components/ReplyItem\";\r\nimport {post} from \"../utils\";\r\n\r\nexport function TwitterDetailPage(props) {\r\n\r\n  function refresh() {\r\n    post(`${baseurl}/get_twitter`, {twitter_id: id}).then(data => {\r\n      setTwitter(data);\r\n    })\r\n    post(`${baseurl}/get_twitter_replies`, {twitter_id: id}).then(data => {\r\n      setReplies(data);\r\n    })\r\n  }\r\n\r\n  const queryParameters = new URLSearchParams(window.location.search)\r\n  const id = queryParameters.get(\"id\")\r\n\r\n  useEffect(() => {\r\n    refresh()\r\n  }, [])\r\n\r\n  let [twitter, setTwitter] = useState([])\r\n  let [replies, setReplies] = useState([])\r\n  let [content, setContent] = useState('')\r\n\r\n\r\n  return (\r\n    <div>\r\n\t  {twitter.map((x, idx) => <TwitterItem key={x._id} twitter_item={x}></TwitterItem>)}\r\n      <div className={\"reply-box\"}>\r\n        <textarea className={\"twitter-area\"}\r\n                  onChange={(e) => setContent(e.target.value)} value={content}></textarea>\r\n        <button className={\"twitter-postbtn\"} onClick={\r\n          async () => {\r\n            if (content.length < 5) {\r\n              alert(\"The minimum length of twitter is 5\")\r\n              return\r\n            }\r\n            await post(`${baseurl}/reply_twitter`, {username: getLoginUser(), content: content, twitter_id: id})\r\n            refresh()\r\n          }\r\n        }>Reply\r\n        </button>\r\n      </div>\r\n      <button className={\"twitter-delbtn\"} onClick={async () => {\r\n        await post(`${baseurl}/del_twitter`, {twitter_id: id})\r\n        window.location = '/home'\r\n      }}>\r\n        Delete this twitter\r\n      </button>\r\n      <div style={{height: \"20px\"}}></div>\r\n      {replies.map((x, i) => <ReplyItem key={i} reply_item={x}/>)}\r\n    </div>\r\n  )\r\n}\r\n\r\nTwitterDetailPage.propTypes = {};\r\n"],"mappings":"qXAAA,OAAQA,OAAO,CAAEC,YAAY,KAAO,WAAW,CAC/C,OAAQC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CACzC,OAAQC,WAAW,KAAO,2BAA2B,CACrD,OAAQC,SAAS,KAAO,yBAAyB,CACjD,OAAQC,IAAI,KAAO,UAAU,CAAC,wFAE9B,MAAO,SAASC,kBAAiB,CAACC,KAAK,CAAE,CAEvC,QAASC,QAAO,EAAG,CACjBH,IAAI,WAAIN,OAAO,iBAAgB,CAACU,UAAU,CAAEC,EAAE,CAAC,CAAC,CAACC,IAAI,CAAC,SAAAC,IAAI,CAAI,CAC5DC,UAAU,CAACD,IAAI,CAAC,CAClB,CAAC,CAAC,CACFP,IAAI,WAAIN,OAAO,yBAAwB,CAACU,UAAU,CAAEC,EAAE,CAAC,CAAC,CAACC,IAAI,CAAC,SAAAC,IAAI,CAAI,CACpEE,UAAU,CAACF,IAAI,CAAC,CAClB,CAAC,CAAC,CACJ,CAEA,GAAMG,gBAAe,CAAG,GAAIC,gBAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CACnE,GAAMT,GAAE,CAAGK,eAAe,CAACK,GAAG,CAAC,IAAI,CAAC,CAEpCnB,SAAS,CAAC,UAAM,CACdO,OAAO,EAAE,CACX,CAAC,CAAE,EAAE,CAAC,CAEN,cAA4BN,QAAQ,CAAC,EAAE,CAAC,wCAAnCmB,OAAO,eAAER,UAAU,eACxB,eAA4BX,QAAQ,CAAC,EAAE,CAAC,yCAAnCoB,OAAO,eAAER,UAAU,eACxB,eAA4BZ,QAAQ,CAAC,EAAE,CAAC,yCAAnCqB,OAAO,eAAEC,UAAU,eAGxB,mBACE,uBACAH,OAAO,CAACI,GAAG,CAAC,SAACC,CAAC,CAAEC,GAAG,qBAAK,KAAC,WAAW,EAAa,YAAY,CAAED,CAAE,EAAvBA,CAAC,CAACE,GAAG,CAAiC,GAAC,cAC/E,aAAK,SAAS,CAAE,WAAY,wBAC1B,iBAAU,SAAS,CAAE,cAAe,CAC1B,QAAQ,CAAE,kBAACC,CAAC,QAAKL,WAAU,CAACK,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,CAAC,KAAK,CAAER,OAAQ,EAAY,cAClF,eAAQ,SAAS,CAAE,iBAAkB,CAAC,OAAO,wEAC3C,0IACMA,OAAO,CAACS,MAAM,CAAG,CAAC,0BACpBC,KAAK,CAAC,oCAAoC,CAAC,+DAGvC5B,KAAI,WAAIN,OAAO,mBAAkB,CAACmC,QAAQ,CAAElC,YAAY,EAAE,CAAEuB,OAAO,CAAEA,OAAO,CAAEd,UAAU,CAAEC,EAAE,CAAC,CAAC,QACpGF,OAAO,EAAE,uDACV,EACF,mBACQ,GACL,cACN,eAAQ,SAAS,CAAE,gBAAiB,CAAC,OAAO,wEAAE,iKACtCH,KAAI,WAAIN,OAAO,iBAAgB,CAACU,UAAU,CAAEC,EAAE,CAAC,CAAC,QACtDO,MAAM,CAACC,QAAQ,CAAG,OAAO,yDAC1B,EAAC,iCAEO,cACT,YAAK,KAAK,CAAE,CAACiB,MAAM,CAAE,MAAM,CAAE,EAAO,CACnCb,OAAO,CAACG,GAAG,CAAC,SAACC,CAAC,CAAEU,CAAC,qBAAK,KAAC,SAAS,EAAS,UAAU,CAAEV,CAAE,EAAjBU,CAAC,CAAkB,GAAC,GACvD,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}